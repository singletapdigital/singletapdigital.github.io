(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{jLLM:function(e,t,n){"use strict";n.r(t),n.d(t,"Tab1PageModule",(function(){return Z}));var a=n("UKGz"),o=n("sZkV"),i=n("SVse"),r=n("s7LF"),s=n("8Y7J");let c=(()=>{class e{}return e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({factory:function(t){return new(t||e)},imports:[[i.c,r.f,o.u]]}),e})();var l=n("UhP/");n("omvX"),n("YEUz");let b=(()=>{class e{}return e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({factory:function(t){return new(t||e)},imports:[[l.e,l.c],l.c]}),e})();var d=n("pMoy"),u=n("8LU1");n("LRne"),n("z6cu"),n("cp0P"),n("quSY"),n("vkgz"),n("lJxs"),n("JIr8"),n("nYR2"),n("w1tV"),n("IzEk"),n("IheW"),n("cUpR");let m=(()=>{class e{}return e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({factory:function(t){return new(t||e)},imports:[[l.c],l.c]}),e})();n("Ht+U");var v=n("XNiG");n("VRyK"),n("GS7A");class g{}const p=Object(l.i)(Object(l.h)(g));let h=(()=>{class e extends p{constructor(){super(...arguments),this.sortables=new Map,this._stateChanges=new v.a,this.start="asc",this._direction="",this.sortChange=new s.o}get direction(){return this._direction}set direction(e){if(Object(s.W)()&&e&&"asc"!==e&&"desc"!==e)throw function(e){return Error(e+" is not a valid sort direction ('asc' or 'desc').")}(e);this._direction=e}get disableClear(){return this._disableClear}set disableClear(e){this._disableClear=Object(u.b)(e)}register(e){if(!e.id)throw Error("MatSortHeader must be provided with a unique id.");if(this.sortables.has(e.id))throw Error(`Cannot have two MatSortables with the same id (${e.id}).`);this.sortables.set(e.id,e)}deregister(e){this.sortables.delete(e.id)}sort(e){this.active!=e.id?(this.active=e.id,this.direction=e.start?e.start:this.start):this.direction=this.getNextSortDirection(e),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(e){if(!e)return"";let t=function(e,t){let n=["asc","desc"];return"desc"==e&&n.reverse(),t||n.push(""),n}(e.start||this.start,null!=e.disableClear?e.disableClear:this.disableClear),n=t.indexOf(this.direction)+1;return n>=t.length&&(n=0),t[n]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return e.\u0275fac=function(t){return f(t||e)},e.\u0275dir=s.Fb({type:e,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"],active:["matSortActive","active"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[s.xb,s.yb]}),e})();const f=s.Sb(h);let D=(()=>{class e{constructor(){this.changes=new v.a,this.sortButtonLabel=e=>"Change sorting for "+e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(s.Gb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();const w={provide:D,deps:[[new s.B,new s.K,D]],useFactory:function(e){return e||new D}};let P=(()=>{class e{}return e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({factory:function(t){return new(t||e)},providers:[w],imports:[[i.c]]}),e})();var C=n("OaSA"),T=n("iInd"),y=n("t0hA"),_=n("RXPq"),E=n("kiQV");let S=(()=>{class e{constructor(){this.appVersion=E.a}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var k=n("lTCR"),I=n.n(k),O=n("Ok9p"),A=n("Pea1"),Q=n("nbgS");const j=I.a`
  # Get all future events.
  subscription GetAllEvents($eventEndDateTime: timestamptz_comparison_exp = {}) {
    Event(where: { eventEndDateTime: $eventEndDateTime }, limit: 20) {
      eventName
      randomUUID
      updated_at
    }
  }
`,U=I.a`
  mutation CreateEvent($eventInsertObject: Event_insert_input! = {}) {
    insert_Event_one(object: $eventInsertObject) {
      randomUUID
      bookingAvailableStartDateTime
      bookingAvailableEndDateTime
      eventStartDateTime
      eventEndDateTime
      eventDateTimeRange
      bookingAvailabilityDateTimeRange
      eventName
      eventTopic
      eventCategory
      eventCapacity
      eventDescription
      eventMedium
    }
  }
`;let R=(()=>{class e{constructor(e){this.apollo=e}getEvents(e=new Date,t=this.apollo){const n=Object(A.b)(e);return t.subscribe({query:j,fetchPolicy:"cache-first",variables:{eventEndDateTime:{_gte:n}}})}createEvent(e=this.apollo){const t=new Date,n=new Date(t.getTime()-Object(A.a)(2)),a=new Date(t.getTime()+Object(A.a)(7)),o=new Date(t.getTime()+Object(A.a)(9)),i=new Date(t.getTime()+Object(A.a)(10)),r=(new Date(t.getTime()+Object(A.a)(10)),{bookingAvailableStartDateTime:n,bookingAvailableEndDateTime:a,eventStartDateTime:o,eventEndDateTime:i,bookingAvailabilityDateTimeRange:"('2020-07-22T09:27:53.667Z', '2020-08-14T09:27:53.667Z']",eventDateTimeRange:"('2020-07-22T09:27:53.667Z', '2020-08-14T09:27:53.667Z']",eventName:"Sunday service",eventTopic:"Topic ",eventMedium:"In-person",eventCategory:"ChurchCategory",eventCapacity:49,eventDescription:"Description of community event",Organiser:{data:{organiserDetails:"anonymous",User:{data:{username:"anonymous",emailAddress:"anonymous@anonymous"},on_conflict:{constraint:O.i.User_username_key,update_columns:[O.j.updated_at]}}},on_conflict:{constraint:O.e.Organiser_organiserID_organiserDetails_userID_created_at_up_key,update_columns:[O.f.updated_at]}}});return console.log("EventService -> constructor -> eventInsertObject",r),e.mutate({mutation:U,variables:{eventInsertObject:r}})}}return e.\u0275fac=function(t){return new(t||e)(s.Ub(Q.b))},e.\u0275prov=s.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var M=n("h80k");function x(e,t){if(1&e){const e=s.Rb();s.Qb(0,"ion-button",5),s.Yb("click",(function(t){return s.lc(e),s.cc().clickInstallPwa(t)})),s.sc(1," Click here to install "),s.Pb()}}function N(e,t){1&e&&(s.Qb(0,"th",20),s.sc(1," Event name "),s.Pb())}function L(e,t){if(1&e&&(s.Qb(0,"td",21),s.sc(1),s.Pb()),2&e){const e=t.$implicit;s.Ab(1),s.tc(" ",e.eventName," ")}}function H(e,t){1&e&&(s.Qb(0,"th",20),s.sc(1," Event UUID "),s.Pb())}function q(e,t){if(1&e&&(s.Qb(0,"td",21),s.sc(1),s.Pb()),2&e){const e=t.$implicit;s.Ab(1),s.tc(" ",e.randomUUID," ")}}function $(e,t){1&e&&(s.Qb(0,"th",20),s.sc(1," Modified date "),s.Pb())}function z(e,t){if(1&e&&(s.Qb(0,"td",21),s.sc(1),s.Pb()),2&e){const e=t.$implicit;s.Ab(1),s.tc(" ",e.updated_at," ")}}function V(e,t){1&e&&s.Lb(0,"tr",22)}function G(e,t){1&e&&s.Lb(0,"tr",23)}const K=["eventName","randomUUID","updated_at"],J=[{path:"",component:(()=>{class e{constructor(e,t,n,a,o){this.pwaService=e,this.appInfo=t,this.eventService=n,this.bookingService=a,this.apollo=o,this.eventsTableDataSource=new C.k,this.displayedColumns=K}get numSelected(){return 0}ngOnInit(){console.log("ngOnInit -> ngOnInit");const e=this.bookingService.getNumberOfPersonBookingsForEvent("667c1a54-3c59-4eff-a507-b55a80094249"),t=this.eventService.getEvents();this.subscribeLatestPersonCount(e,"667c1a54-3c59-4eff-a507-b55a80094249"),this.subscribeLatestEvents(t,this.eventsTableDataSource)}subscribeLatestPersonCount(e,t){e.subscribe(e=>{console.log(`Event code: ${t} ${JSON.stringify(e)}`)});const n=Object(y.b)(e);this.latestCountNumberPersons=n}subscribeLatestEvents(e,t){console.log("Tab1Page:: subscribeLatestEvents"),e.subscribe(e=>{const{data:{Event:n},errors:a}=e;(null==a?void 0:a.length)>0||(console.log("%c","background: #444; color: #bada55; padding: 2px; border-radius:24px","Tab1Page:: subscribeLatestEvents -> events",n.length),console.log("%c Tab1Page:: subscribeLatestEvents -> events","background: #444; color: #2dd36f; padding: 2px; border-radius:24px"),t.data=n)})}clickInstallPwa(e,t=this.pwaService){var n;console.log("Tab1Page:: installPwa -> event",e),null===(n=t.deferredInstallPromptEvent)||void 0===n||n.prompt().then(e=>{console.log("Tab1Page:: clickInstallPwa -> installPromiseResolution",e)}).catch(()=>{})}clickTestEventHandler(e,t=this.eventService){console.log("Tab1Page:: clickTestEventHandler -> event",e),t.createEvent().subscribe(e=>{const{data:{insert_Event_one:{randomUUID:t,bookingAvailableStartDateTime:n,bookingAvailableEndDateTime:a,eventStartDateTime:o,eventEndDateTime:i,eventDateTimeRange:r,bookingAvailabilityDateTimeRange:s,eventName:c,eventTopic:l,eventCategory:b,eventCapacity:d,eventDescription:u,eventMedium:m}},errors:v}=e;console.log("Tab1Page:: clickTestEventHandler -> errors",v),console.log("Tab1Page:: clickTestEventHandler -> data",t,n,a,o,i,r,s,c,l,b,d,u,m)})}}return e.\u0275fac=function(t){return new(t||e)(s.Kb(_.a),s.Kb(S),s.Kb(R),s.Kb(y.a),s.Kb(Q.b))},e.\u0275cmp=s.Eb({type:e,selectors:[["app-tab1"]],decls:40,vars:10,consts:[[3,"translucent"],["color","cobaltblue"],["slot","start"],[2,"padding-inline-start","0.25em"],["slot","end"],[3,"click"],[3,"fullscreen"],[3,"click",4,"ngIf"],["id","EventsTable","mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","eventName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","randomUUID"],["matColumnDef","updated_at"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["collapse","condense"],["size","large"],[1,"ion-no-border"],["color","secondary"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(s.Qb(0,"ion-header",0),s.Qb(1,"ion-toolbar",1),s.Qb(2,"ion-buttons",2),s.Lb(3,"app-home-button"),s.Pb(),s.Qb(4,"ion-title",3),s.sc(5," COVIDSafe Event Booking Registry "),s.Pb(),s.Qb(6,"ion-button",4),s.Qb(7,"ion-button",5),s.Yb("click",(function(e){return t.clickTestEventHandler(e)})),s.sc(8,"Test"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(9,"ion-content",6),s.Qb(10,"ion-grid"),s.Qb(11,"ion-row"),s.Qb(12,"ion-col"),s.sc(13," Install button: "),s.qc(14,x,2,0,"ion-button",7),s.Pb(),s.Pb(),s.Qb(15,"ion-row"),s.Qb(16,"ion-col"),s.sc(17),s.dc(18,"async"),s.Pb(),s.Pb(),s.Qb(19,"ion-row"),s.Lb(20,"ion-col"),s.Pb(),s.Pb(),s.Qb(21,"table",8),s.Ob(22,9),s.qc(23,N,2,0,"th",10),s.qc(24,L,2,1,"td",11),s.Nb(),s.Ob(25,12),s.qc(26,H,2,0,"th",10),s.qc(27,q,2,1,"td",11),s.Nb(),s.Ob(28,13),s.qc(29,$,2,0,"th",10),s.qc(30,z,2,1,"td",11),s.Nb(),s.qc(31,V,1,0,"tr",14),s.qc(32,G,1,0,"tr",15),s.Pb(),s.Qb(33,"ion-header",16),s.Qb(34,"ion-toolbar"),s.Qb(35,"ion-title",17),s.sc(36,"Tab 1"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(37,"ion-footer",18),s.Qb(38,"ion-text",19),s.sc(39),s.Pb(),s.Pb()),2&e&&(s.hc("translucent",!0),s.Ab(9),s.hc("fullscreen",!0),s.Ab(5),s.hc("ngIf",t.pwaService.isPwaInstallAvailable),s.Ab(3),s.tc(" Attendees registered: ",s.ec(18,8,t.latestCountNumberPersons)," "),s.Ab(4),s.hc("dataSource",t.eventsTableDataSource),s.Ab(10),s.hc("matHeaderRowDef",t.displayedColumns),s.Ab(1),s.hc("matRowDefColumns",t.displayedColumns),s.Ab(7),s.tc(" v",t.appInfo.appVersion," "))},directives:[o.h,o.t,o.c,M.a,o.s,o.b,o.e,o.g,o.n,o.d,i.j,C.j,h,C.c,C.e,C.b,C.g,C.i,o.f,o.r,C.d,C.a,C.f,C.h],pipes:[i.b],styles:["table[_ngcontent-%COMP%]{min-width:40em;width:80%}.m-t-xl[_ngcontent-%COMP%]{margin-top:3em}.m-b-xl[_ngcontent-%COMP%]{margin-bottom:3em}.normal-table-heading[_ngcontent-%COMP%]{margin-top:1em}.normal-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:.5em}.normal-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5em}hr[_ngcontent-%COMP%]{margin-top:4em;margin-bottom:2em}"]}),e})()}];let Y=(()=>{class e{}return e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({factory:function(t){return new(t||e)},imports:[[T.i.forChild(J)],T.i]}),e})(),Z=(()=>{class e{}return e.\u0275mod=s.Ib({type:e}),e.\u0275inj=s.Hb({factory:function(t){return new(t||e)},imports:[[o.u,i.c,r.f,c,a.a,b,d.b,m,P,C.l,Y]]}),e})()},kiQV:function(e){e.exports=JSON.parse('{"a":"0.0.4"}')}}]);