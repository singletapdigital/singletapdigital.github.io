(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{jLLM:function(e,t,n){"use strict";n.r(t),n.d(t,"Tab1PageModule",(function(){return F}));var a=n("UKGz"),o=n("sZkV"),i=n("SVse"),r=n("s7LF"),s=n("qtYk"),c=n("UhP/"),l=(n("omvX"),n("8Y7J"));n("YEUz");let b=(()=>{class e{}return e.\u0275mod=l.Ib({type:e}),e.\u0275inj=l.Hb({factory:function(t){return new(t||e)},imports:[[c.e,c.c],c.c]}),e})();var d=n("8LU1"),u=n("9b/N");let m=(()=>{class e{}return e.\u0275mod=l.Ib({type:e}),e.\u0275inj=l.Hb({factory:function(t){return new(t||e)}}),e})(),v=(()=>{class e{}return e.\u0275mod=l.Ib({type:e}),e.\u0275inj=l.Hb({factory:function(t){return new(t||e)},imports:[[c.e,c.c,u.c,m],c.c,m]}),e})();n("LRne"),n("z6cu"),n("cp0P"),n("quSY"),n("vkgz"),n("lJxs"),n("JIr8"),n("nYR2"),n("w1tV"),n("IzEk"),n("IheW"),n("cUpR");let g=(()=>{class e{}return e.\u0275mod=l.Ib({type:e}),e.\u0275inj=l.Hb({factory:function(t){return new(t||e)},imports:[[c.c],c.c]}),e})();n("Ht+U");var p=n("XNiG");n("VRyK"),n("GS7A");class h{}const f=Object(c.i)(Object(c.h)(h));let D=(()=>{class e extends f{constructor(){super(...arguments),this.sortables=new Map,this._stateChanges=new p.a,this.start="asc",this._direction="",this.sortChange=new l.o}get direction(){return this._direction}set direction(e){if(Object(l.W)()&&e&&"asc"!==e&&"desc"!==e)throw function(e){return Error(e+" is not a valid sort direction ('asc' or 'desc').")}(e);this._direction=e}get disableClear(){return this._disableClear}set disableClear(e){this._disableClear=Object(d.b)(e)}register(e){if(!e.id)throw Error("MatSortHeader must be provided with a unique id.");if(this.sortables.has(e.id))throw Error(`Cannot have two MatSortables with the same id (${e.id}).`);this.sortables.set(e.id,e)}deregister(e){this.sortables.delete(e.id)}sort(e){this.active!=e.id?(this.active=e.id,this.direction=e.start?e.start:this.start):this.direction=this.getNextSortDirection(e),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(e){if(!e)return"";let t=function(e,t){let n=["asc","desc"];return"desc"==e&&n.reverse(),t||n.push(""),n}(e.start||this.start,null!=e.disableClear?e.disableClear:this.disableClear),n=t.indexOf(this.direction)+1;return n>=t.length&&(n=0),t[n]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return e.\u0275fac=function(t){return w(t||e)},e.\u0275dir=l.Fb({type:e,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"],active:["matSortActive","active"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[l.xb,l.yb]}),e})();const w=l.Sb(D);let P=(()=>{class e{constructor(){this.changes=new p.a,this.sortButtonLabel=e=>"Change sorting for "+e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(l.Gb)({factory:function(){return new e},token:e,providedIn:"root"}),e})();const C={provide:P,deps:[[new l.B,new l.K,P]],useFactory:function(e){return e||new P}};let T=(()=>{class e{}return e.\u0275mod=l.Ib({type:e}),e.\u0275inj=l.Hb({factory:function(t){return new(t||e)},providers:[C],imports:[[i.c]]}),e})();var y=n("OaSA"),_=n("iInd"),k=n("t0hA"),E=n("RXPq"),S=n("kiQV");let I=(()=>{class e{constructor(){this.appVersion=S.a}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var O=n("lTCR"),A=n.n(O),j=n("Ok9p"),Q=n("Pea1"),U=n("nbgS");const R=A.a`
  # Get all future events.
  subscription GetAllEvents($eventEndDateTime: timestamptz_comparison_exp = {}) {
    Event(where: { eventEndDateTime: $eventEndDateTime }, limit: 20) {
      eventName
      randomUUID
      updated_at
    }
  }
`,N=A.a`
  mutation CreateEvent($eventInsertObject: Event_insert_input! = {}) {
    insert_Event_one(object: $eventInsertObject) {
      randomUUID
      bookingAvailableStartDateTime
      bookingAvailableEndDateTime
      eventStartDateTime
      eventEndDateTime
      eventDateTimeRange
      bookingAvailabilityDateTimeRange
      eventName
      eventTopic
      eventCategory
      eventCapacity
      eventDescription
      eventMedium
    }
  }
`;let x=(()=>{class e{constructor(e){this.apollo=e}getEvents(e=new Date,t=this.apollo){const n=Object(Q.b)(e);return t.subscribe({query:R,fetchPolicy:"cache-first",variables:{eventEndDateTime:{_gte:n}}})}createEvent(e=this.apollo){const t=new Date,n=new Date(t.getTime()-Object(Q.a)(2)),a=new Date(t.getTime()+Object(Q.a)(7)),o=new Date(t.getTime()+Object(Q.a)(9)),i=new Date(t.getTime()+Object(Q.a)(10)),r=(new Date(t.getTime()+Object(Q.a)(10)),{bookingAvailableStartDateTime:n,bookingAvailableEndDateTime:a,eventStartDateTime:o,eventEndDateTime:i,bookingAvailabilityDateTimeRange:"('2020-07-22T09:27:53.667Z', '2020-08-14T09:27:53.667Z']",eventDateTimeRange:"('2020-07-22T09:27:53.667Z', '2020-08-14T09:27:53.667Z']",eventName:"Sunday service",eventTopic:"Topic ",eventMedium:"In-person",eventCategory:"ChurchCategory",eventCapacity:49,eventDescription:"Description of community event",Organiser:{data:{organiserDetails:"anonymous",User:{data:{username:"anonymous",emailAddress:"anonymous@anonymous"},on_conflict:{constraint:j.i.User_username_key,update_columns:[j.j.updated_at]}}},on_conflict:{constraint:j.e.Organiser_organiserID_organiserDetails_userID_created_at_up_key,update_columns:[j.f.updated_at]}}});return console.log("EventService -> constructor -> eventInsertObject",r),e.mutate({mutation:N,variables:{eventInsertObject:r}})}}return e.\u0275fac=function(t){return new(t||e)(l.Ub(U.b))},e.\u0275prov=l.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var M=n("h80k");function H(e,t){if(1&e){const e=l.Rb();l.Qb(0,"ion-button",5),l.Yb("click",(function(t){return l.lc(e),l.cc().clickInstallPwa(t)})),l.sc(1," Click here to install "),l.Pb()}}function L(e,t){1&e&&(l.Qb(0,"th",20),l.sc(1," Event name "),l.Pb())}function q(e,t){if(1&e&&(l.Qb(0,"td",21),l.sc(1),l.Pb()),2&e){const e=t.$implicit;l.Ab(1),l.tc(" ",e.eventName," ")}}function $(e,t){1&e&&(l.Qb(0,"th",20),l.sc(1," Event UUID "),l.Pb())}function z(e,t){if(1&e&&(l.Qb(0,"td",21),l.sc(1),l.Pb()),2&e){const e=t.$implicit;l.Ab(1),l.tc(" ",e.randomUUID," ")}}function V(e,t){1&e&&(l.Qb(0,"th",20),l.sc(1," Modified date "),l.Pb())}function G(e,t){if(1&e&&(l.Qb(0,"td",21),l.sc(1),l.Pb()),2&e){const e=t.$implicit;l.Ab(1),l.tc(" ",e.updated_at," ")}}function K(e,t){1&e&&l.Lb(0,"tr",22)}function J(e,t){1&e&&l.Lb(0,"tr",23)}const Y=["eventName","randomUUID","updated_at"],Z=[{path:"",component:(()=>{class e{constructor(e,t,n,a,o){this.pwaService=e,this.appInfo=t,this.eventService=n,this.bookingService=a,this.apollo=o,this.eventsTableDataSource=new y.k,this.displayedColumns=Y}get numSelected(){return 0}ngOnInit(){console.log("ngOnInit -> ngOnInit");const e=this.bookingService.getNumberOfPersonBookingsForEvent("667c1a54-3c59-4eff-a507-b55a80094249"),t=this.eventService.getEvents();this.subscribeLatestPersonCount(e,"667c1a54-3c59-4eff-a507-b55a80094249"),this.subscribeLatestEvents(t,this.eventsTableDataSource)}subscribeLatestPersonCount(e,t){e.subscribe(e=>{console.log(`Event code: ${t} ${JSON.stringify(e)}`)});const n=Object(k.b)(e);this.latestCountNumberPersons=n}subscribeLatestEvents(e,t){console.log("Tab1Page:: subscribeLatestEvents"),e.subscribe(e=>{const{data:{Event:n},errors:a}=e;(null==a?void 0:a.length)>0||(console.log("%c","background: #444; color: #bada55; padding: 2px; border-radius:24px","Tab1Page:: subscribeLatestEvents -> events",n.length),console.log("%c Tab1Page:: subscribeLatestEvents -> events","background: #444; color: #2dd36f; padding: 2px; border-radius:24px"),t.data=n)})}clickInstallPwa(e,t=this.pwaService){var n;console.log("Tab1Page:: installPwa -> event",e),null===(n=t.deferredInstallPromptEvent)||void 0===n||n.prompt().then(e=>{console.log("Tab1Page:: clickInstallPwa -> installPromiseResolution",e)}).catch(()=>{})}clickTestEventHandler(e,t=this.eventService){console.log("Tab1Page:: clickTestEventHandler -> event",e),t.createEvent().subscribe(e=>{const{data:{insert_Event_one:{randomUUID:t,bookingAvailableStartDateTime:n,bookingAvailableEndDateTime:a,eventStartDateTime:o,eventEndDateTime:i,eventDateTimeRange:r,bookingAvailabilityDateTimeRange:s,eventName:c,eventTopic:l,eventCategory:b,eventCapacity:d,eventDescription:u,eventMedium:m}},errors:v}=e;console.log("Tab1Page:: clickTestEventHandler -> errors",v),console.log("Tab1Page:: clickTestEventHandler -> data",t,n,a,o,i,r,s,c,l,b,d,u,m)})}}return e.\u0275fac=function(t){return new(t||e)(l.Kb(E.a),l.Kb(I),l.Kb(x),l.Kb(k.a),l.Kb(U.b))},e.\u0275cmp=l.Eb({type:e,selectors:[["app-tab1"]],decls:40,vars:10,consts:[[3,"translucent"],["color","cobaltblue"],["slot","start"],[2,"padding-inline-start","0.25em"],["slot","end"],[3,"click"],[3,"fullscreen"],[3,"click",4,"ngIf"],["id","EventsTable","mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","eventName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","randomUUID"],["matColumnDef","updated_at"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["collapse","condense"],["size","large"],[1,"ion-no-border"],["color","secondary"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(l.Qb(0,"ion-header",0),l.Qb(1,"ion-toolbar",1),l.Qb(2,"ion-buttons",2),l.Lb(3,"app-home-button"),l.Pb(),l.Qb(4,"ion-title",3),l.sc(5," COVIDSafe Event Booking Registry "),l.Pb(),l.Qb(6,"ion-button",4),l.Qb(7,"ion-button",5),l.Yb("click",(function(e){return t.clickTestEventHandler(e)})),l.sc(8,"Test"),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(9,"ion-content",6),l.Qb(10,"ion-grid"),l.Qb(11,"ion-row"),l.Qb(12,"ion-col"),l.sc(13," Install button: "),l.qc(14,H,2,0,"ion-button",7),l.Pb(),l.Pb(),l.Qb(15,"ion-row"),l.Qb(16,"ion-col"),l.sc(17),l.dc(18,"async"),l.Pb(),l.Pb(),l.Qb(19,"ion-row"),l.Lb(20,"ion-col"),l.Pb(),l.Pb(),l.Qb(21,"table",8),l.Ob(22,9),l.qc(23,L,2,0,"th",10),l.qc(24,q,2,1,"td",11),l.Nb(),l.Ob(25,12),l.qc(26,$,2,0,"th",10),l.qc(27,z,2,1,"td",11),l.Nb(),l.Ob(28,13),l.qc(29,V,2,0,"th",10),l.qc(30,G,2,1,"td",11),l.Nb(),l.qc(31,K,1,0,"tr",14),l.qc(32,J,1,0,"tr",15),l.Pb(),l.Qb(33,"ion-header",16),l.Qb(34,"ion-toolbar"),l.Qb(35,"ion-title",17),l.sc(36,"Tab 1"),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(37,"ion-footer",18),l.Qb(38,"ion-text",19),l.sc(39),l.Pb(),l.Pb()),2&e&&(l.hc("translucent",!0),l.Ab(9),l.hc("fullscreen",!0),l.Ab(5),l.hc("ngIf",t.pwaService.isPwaInstallAvailable),l.Ab(3),l.tc(" Attendees registered: ",l.ec(18,8,t.latestCountNumberPersons)," "),l.Ab(4),l.hc("dataSource",t.eventsTableDataSource),l.Ab(10),l.hc("matHeaderRowDef",t.displayedColumns),l.Ab(1),l.hc("matRowDefColumns",t.displayedColumns),l.Ab(7),l.tc(" v",t.appInfo.appVersion," "))},directives:[o.h,o.t,o.c,M.a,o.s,o.b,o.e,o.g,o.n,o.d,i.j,y.j,D,y.c,y.e,y.b,y.g,y.i,o.f,o.r,y.d,y.a,y.f,y.h],pipes:[i.b],styles:["table[_ngcontent-%COMP%]{min-width:40em;width:80%}.m-t-xl[_ngcontent-%COMP%]{margin-top:3em}.m-b-xl[_ngcontent-%COMP%]{margin-bottom:3em}.normal-table-heading[_ngcontent-%COMP%]{margin-top:1em}.normal-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:.5em}.normal-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5em}hr[_ngcontent-%COMP%]{margin-top:4em;margin-bottom:2em}"]}),e})()}];let B=(()=>{class e{}return e.\u0275mod=l.Ib({type:e}),e.\u0275inj=l.Hb({factory:function(t){return new(t||e)},imports:[[_.i.forChild(Z)],_.i]}),e})(),F=(()=>{class e{}return e.\u0275mod=l.Ib({type:e}),e.\u0275inj=l.Hb({factory:function(t){return new(t||e)},imports:[[o.u,i.c,r.f,s.a,a.a,b,v,g,T,y.l,B]]}),e})()},kiQV:function(e){e.exports=JSON.parse('{"a":"0.0.4"}')}}]);