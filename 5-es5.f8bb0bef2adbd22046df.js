!function(){function n(n,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function e(e,o,i){return o&&n(e.prototype,o),i&&n(e,i),e}function o(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{eNtl:function(n,i,t){"use strict";t.r(i),t.d(i,"BookingPageModule",(function(){return P}));var r,s,b,c=t("UKGz"),a=t("SVse"),l=t("s7LF"),u=t("sZkV"),d=t("iInd"),m=t("mrSG"),h=function n(){o(this,n),this.personFirstName=new l.c("",[l.n.required,l.n.minLength(3)]),this.personLastName=new l.c("",[l.n.required,l.n.minLength(1)]),this.personPhoneNumber=new l.c("",[l.n.required,l.n.minLength(10),l.n.pattern(/^[+)(\d)]+$/)]),this.personEmailAddress=new l.c("",[l.n.required,l.n.minLength(1),l.n.email])},g=t("t0hA"),f=t("8Y7J"),p=t("h80k"),v=[{path:"",component:(r=function(){function n(i,t,r){o(this,n),this.bookingService=i,this.formBuilder=t,this.toastController=r,this.bookingChineseUUID="445538f0-e22e-4568-acf8-9bc5bba3ceb6",this.bookingEnglishUUID="81508052-8691-4ff4-a3ef-c36bf7fccc88",this.eventChineseUUID="445538f0-e22e-4568-acf8-9bc5bba3ceb6",this.eventEnglishUUID="f883134b-661a-4388-b677-582bc2ea39aa",this.isLocked=!1;var s=t.group(function(){function n(){o(this,n)}return e(n,null,[{key:"createPersonForm",value:function(){return new h}}]),n}().createPersonForm());this.bookingForm=s}return e(n,[{key:"ngOnInit",value:function(){console.log("BookingPage -> ngOnInit");var n=Object(g.b)(this.bookingService.getNumberOfPersonBookingsForEvent());this.latestPersonsCountChinese=n}},{key:"clickSubmitForm",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"445538f0-e22e-4568-acf8-9bc5bba3ceb6",o=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.bookingForm,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.bookingService;console.log("BookingPage:: clickSubmitForm() -> form",o,i,t);var s=t.value;""!==s.personFirstName?r.addPersonToBookingByUUID(e,s).subscribe((function(e){var o,i,t,r;console.log("BookingPage -> clickSubmitForm -> personBookingResult",e),n.presentToast("Successfully saved booking "+(null===(r=null===(t=null===(i=null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.insert_Person)||void 0===i?void 0:i.returning)||void 0===t?void 0:t[0])||void 0===r?void 0:r.personFirstName)).catch()}),(function(e){n.presentToast("Error saving "+JSON.stringify(e)).catch()})):this.presentToast("Invalid inputs detected").catch()}},{key:"presentToast",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.toastController;return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.create({message:n,duration:3500,animated:!0,translucent:!0});case 2:return o.abrupt("return",o.sent.present().then((function(){console.log("Toast presented")})));case 3:case"end":return o.stop()}}),o)})))}}]),n}(),r.\u0275fac=function(n){return new(n||r)(f.Kb(g.a),f.Kb(l.b),f.Kb(u.y))},r.\u0275cmp=f.Eb({type:r,selectors:[["app-booking"]],decls:49,vars:13,consts:[[3,"translucent"],["color","cobaltblue"],["slot","start"],[2,"padding-inline-start","0.25em"],[3,"formGroup","ngSubmit"],["f","ngForm"],[3,"fixed"],["size","2"],["lines","full"],["position","floating"],["formControlName","personFirstName","type","text","required",""],["formControlName","personLastName","type","text","required",""],["formControlName","personPhoneNumber","type","text","required",""],["size","4.5"],["formControlName","personEmailAddress","type","text","required",""],["type","submit","color","cobaltblue",3,"disabled"],["name","person-add-outline"],["type","submit","mat-button","","color","primary","hidden","",3,"disabled"],["name","document-text"],["type","button","color","brightnavyblue",3,"disabled","click"]],template:function(n,e){if(1&n){var o=f.Rb();f.Qb(0,"ion-header",0),f.Qb(1,"ion-toolbar",1),f.Qb(2,"ion-buttons",2),f.Lb(3,"app-home-button"),f.Pb(),f.Qb(4,"ion-title",3),f.rc(5," Booking "),f.Pb(),f.Pb(),f.Pb(),f.Qb(6,"ion-content"),f.Qb(7,"form",4,5),f.Yb("ngSubmit",(function(n){f.lc(o);var i=f.kc(8);return e.clickSubmitForm(void 0,i,n)})),f.rc(9),f.dc(10,"async"),f.Lb(11,"br"),f.rc(12),f.dc(13,"async"),f.Qb(14,"ion-grid",6),f.Qb(15,"ion-row"),f.Qb(16,"ion-col",7),f.Qb(17,"ion-item",8),f.Qb(18,"ion-label",9),f.rc(19," First name "),f.Pb(),f.Lb(20,"ion-input",10),f.Pb(),f.Pb(),f.Pb(),f.Qb(21,"ion-row"),f.Qb(22,"ion-col",7),f.Qb(23,"ion-item",8),f.Qb(24,"ion-label",9),f.rc(25," Last name "),f.Pb(),f.Lb(26,"ion-input",11),f.Pb(),f.Pb(),f.Pb(),f.Qb(27,"ion-row"),f.Qb(28,"ion-col",7),f.Qb(29,"ion-item",8),f.Qb(30,"ion-label",9),f.rc(31," Phone number "),f.Pb(),f.Lb(32,"ion-input",12),f.Pb(),f.Pb(),f.Pb(),f.Qb(33,"ion-row"),f.Qb(34,"ion-col",13),f.Qb(35,"ion-item",8),f.Qb(36,"ion-label",9),f.rc(37," Email address "),f.Pb(),f.Lb(38,"ion-input",14),f.Pb(),f.Pb(),f.Pb(),f.Qb(39,"ion-button",15),f.Lb(40,"ion-icon",16),f.rc(41," Add Person to Booking "),f.Pb(),f.Qb(42,"button",17),f.Lb(43,"ion-icon",18),f.rc(44," Add Person (enter) "),f.Pb(),f.Qb(45,"ion-button",19),f.Yb("click",(function(n){f.lc(o);var i=f.kc(8);return e.clickSubmitForm(e.bookingEnglishUUID,i,n)})),f.rc(46," Register for Sunday service (English hall) "),f.Pb(),f.Qb(47,"ion-button",19),f.Yb("click",(function(n){f.lc(o);var i=f.kc(8);return e.clickSubmitForm(e.bookingChineseUUID,i,n)})),f.rc(48," Register for Sunday service (Chinese hall) "),f.Pb(),f.Pb(),f.Pb(),f.Pb()}2&n&&(f.hc("translucent",!0),f.Ab(7),f.hc("formGroup",e.bookingForm),f.Ab(2),f.sc(" Current English hall registration count: ",f.ec(10,9,e.latestPersonsCountEnglish)," "),f.Ab(3),f.sc(" Current Chinese hall registration count: ",f.ec(13,11,e.latestPersonsCountChinese)," "),f.Ab(2),f.hc("fixed",!0),f.Ab(25),f.hc("disabled",e.bookingForm.invalid),f.Ab(3),f.hc("disabled",e.bookingForm.invalid),f.Ab(3),f.hc("disabled",e.bookingForm.invalid),f.Ab(2),f.hc("disabled",e.bookingForm.invalid))},directives:[u.h,u.t,u.c,p.a,u.s,u.e,l.o,l.k,l.e,u.g,u.n,u.d,u.k,u.l,u.j,u.x,l.j,l.d,l.m,u.b,u.i],pipes:[a.b],styles:[""]}),r)}],k=((b=function n(){o(this,n)}).\u0275mod=f.Ib({type:b}),b.\u0275inj=f.Hb({factory:function(n){return new(n||b)},imports:[[d.i.forChild(v)],d.i]}),b),P=((s=function n(){o(this,n)}).\u0275mod=f.Ib({type:s}),s.\u0275inj=f.Hb({factory:function(n){return new(n||s)},imports:[[a.c,l.f,l.l,u.u,c.a,k]]}),s)}}])}();