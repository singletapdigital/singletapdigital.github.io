(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{eNtl:function(e,n,o){"use strict";o.r(n),o.d(n,"BookingPageModule",(function(){return v}));var i=o("pMoy"),t=o("UKGz"),s=o("SVse"),r=o("s7LF"),c=o("sZkV"),b=o("iInd"),a=o("mrSG");class l{constructor(){this.personFirstName=new r.c("",[r.n.required,r.n.minLength(3)]),this.personLastName=new r.c("",[r.n.required,r.n.minLength(1)]),this.personPhoneNumber=new r.c("",[r.n.required,r.n.minLength(10),r.n.pattern(/^[+)(\d)]+$/)]),this.personEmailAddress=new r.c("",[r.n.required,r.n.minLength(1),r.n.email]),this.isDeclarationChecked=new r.c("",[r.n.requiredTrue])}}var u=o("t0hA"),h=o("8Y7J"),d=o("h80k");function g(e,n){if(1&e&&(h.Qb(0,"div"),h.sc(1),h.Pb()),2&e){const e=n.ngIf;h.Ab(1),h.tc(" ",e," ")}}function m(e,n){if(1&e&&(h.Qb(0,"div"),h.Qb(1,"ion-button",23),h.Lb(2,"ion-icon",24),h.sc(3," Add Person to Booking "),h.Pb(),h.Qb(4,"button",25),h.Lb(5,"ion-icon",26),h.sc(6," Add Person (enter) "),h.Pb(),h.Pb()),2&e){const e=h.cc();h.Ab(1),h.hc("disabled",e.bookingForm.invalid),h.Ab(3),h.hc("disabled",e.bookingForm.invalid)}}function p(e,n){if(1&e){const e=h.Rb();h.Qb(0,"div"),h.Qb(1,"ion-button",27),h.Yb("click",(function(n){h.lc(e);const o=h.cc(),i=h.kc(8);return o.clickSubmitForm(o.bookingEnglishUUID,i,n)})),h.sc(2," Register for Sunday service (English hall) "),h.Pb(),h.Pb()}if(2&e){const e=h.cc();h.Ab(1),h.hc("disabled",e.bookingForm.invalid)}}function f(e,n){1&e&&(h.Qb(0,"ion-text",28),h.sc(1," Registrations reached maximum capacity for English hall "),h.Pb())}function P(e,n){if(1&e){const e=h.Rb();h.Qb(0,"div"),h.Qb(1,"ion-button",27),h.Yb("click",(function(n){h.lc(e);const o=h.cc(),i=h.kc(8);return o.clickSubmitForm(o.bookingChineseUUID,i,n)})),h.sc(2," Register for Sunday service (Chinese hall) "),h.Pb(),h.Pb()}if(2&e){const e=h.cc();h.Ab(1),h.hc("disabled",e.bookingForm.invalid)}}function C(e,n){1&e&&(h.Qb(0,"ion-text",28),h.sc(1," Registrations reached maximum capacity for Chinese hall "),h.Pb())}const k=[{path:"",component:(()=>{class e{constructor(e,n,o){this.bookingService=e,this.formBuilder=n,this.toastController=o,this.bookingChineseUUID="445538f0-e22e-4568-acf8-9bc5bba3ceb6",this.bookingEnglishUUID="81508052-8691-4ff4-a3ef-c36bf7fccc88",this.eventChineseUUID="667c1a54-3c59-4eff-a507-b55a80094249",this.eventEnglishUUID="f883134b-661a-4388-b677-582bc2ea39aa",this.latestPersonsEnglishCap=49,this.latestPersonsChineseCap=49;const i=n.group(class{static createPersonForm(){return new l}}.createPersonForm());this.bookingForm=i}get isEnglishCountCappedLocked(){return this.englishCount>=this.latestPersonsEnglishCap}get isChineseCountCappedLocked(){return this.chineseCount>=this.latestPersonsChineseCap}get isRegistrationAllowedEnglishCountBelowCap(){return!this.isEnglishCountCappedLocked}get isRegistrationAllowedChineseCountBelowCap(){return!this.isChineseCountCappedLocked}ngOnInit(){console.log("BookingPage -> ngOnInit");const e=Object(u.b)(this.bookingService.getNumberOfPersonBookingsForEvent());this.latestPersonsCountChinese=e,e.subscribe(e=>{this.chineseCount=e});const n=Object(u.b)(this.bookingService.getNumberOfPersonBookingsForEvent(this.eventEnglishUUID));this.latestPersonsCountEnglish=n,n.subscribe(e=>this.englishCount=e)}clickSubmitForm(e="445538f0-e22e-4568-acf8-9bc5bba3ceb6",n,o,i=this.bookingForm,t=this.bookingService){e===this.bookingEnglishUUID?this.englishCount+=1:this.chineseCount+=1,console.log("BookingPage:: clickSubmitForm() -> form",n,o,i);const s=i.value;""!==s.personFirstName?t.addPersonToBookingByUUID(e,s).subscribe(e=>{var n,o,i,t;console.log("BookingPage -> clickSubmitForm -> personBookingResult",e),this.presentToast("Successfully saved booking "+(null===(t=null===(i=null===(o=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.insert_Person)||void 0===o?void 0:o.returning)||void 0===i?void 0:i[0])||void 0===t?void 0:t.personFirstName)).catch()},e=>{this.presentToast("Error saving "+JSON.stringify(e)).catch()}):this.presentToast("Invalid inputs detected").catch()}presentToast(e="Loading...",n=this.toastController){return Object(a.a)(this,void 0,void 0,(function*(){return(yield n.create({message:e,duration:3500,animated:!0,translucent:!0})).present().then(()=>{console.log("Toast presented")})}))}compare(e,n){return e<n}}return e.\u0275fac=function(n){return new(n||e)(h.Kb(u.a),h.Kb(r.b),h.Kb(c.y))},e.\u0275cmp=h.Eb({type:e,selectors:[["app-booking"]],decls:83,vars:19,consts:[[3,"translucent"],["color","cobaltblue"],["slot","start"],[2,"padding-inline-start","0.25em"],[3,"formGroup"],["f","ngForm"],[3,"fixed"],[2,"color","gray"],[4,"ngIf"],["start","1"],["aria-label","b","formControlName","isDeclarationChecked",2,"padding-left","0.95em"],["size","3"],["lines","full"],["position","floating"],["formControlName","personFirstName","type","text","required",""],["formControlName","personLastName","type","text","required",""],["formControlName","personPhoneNumber","type","text","required",""],["size","4.5"],["formControlName","personEmailAddress","type","text","required",""],["maxedOut",""],[4,"ngIf","ngIfElse"],["maxedEnglish",""],["maxedChinese",""],["type","button","color","cobaltblue",3,"disabled"],["name","person-add-outline"],["type","button","mat-button","","color","primary","hidden","",3,"disabled"],["name","document-text"],["type","button","color","brightnavyblue",3,"disabled","click"],["color","warning"]],template:function(e,n){if(1&e&&(h.Qb(0,"ion-header",0),h.Qb(1,"ion-toolbar",1),h.Qb(2,"ion-buttons",2),h.Lb(3,"app-home-button"),h.Pb(),h.Qb(4,"ion-title",3),h.sc(5," Booking "),h.Pb(),h.Pb(),h.Pb(),h.Qb(6,"ion-content"),h.Qb(7,"form",4,5),h.Qb(9,"ion-grid",6),h.Qb(10,"ion-row",7),h.Qb(11,"ion-col"),h.qc(12,g,2,1,"div",8),h.dc(13,"async"),h.sc(14),h.dc(15,"async"),h.Lb(16,"br"),h.sc(17),h.dc(18,"async"),h.Pb(),h.Pb(),h.Qb(19,"ol",9),h.Qb(20,"li"),h.sc(21," In the last 14 days have you travelled from overseas or a COVID-19 hotspot? "),h.Pb(),h.Qb(22,"li"),h.sc(23," Have you been in close contact with a person who is positive for COVID-19? "),h.Pb(),h.Qb(24,"li"),h.sc(25," Are you an active COVID-19 case? "),h.Pb(),h.Qb(26,"li"),h.sc(27," Are you currently, or have you recently experienced cough, fever, sore throat, fatigue or shortness of breath? "),h.Pb(),h.Pb(),h.Qb(28,"ol"),h.Qb(29,"li"),h.sc(30," \u5728\u904e\u53bb\u7684 14 \u5929\u4e2d\uff0c\u60a8\u662f\u5f9e\u6d77\u5916, \u9084\u662f\u5f9e COVID-19 \u71b1\u9ede\u56de\u6765\uff1f "),h.Pb(),h.Qb(31,"li"),h.sc(32," \u60a8\u662f\u5426\u8207COVID-19\u68c0\u6d4b\u5448\u967d\u6027\u7684\u4eba\u4fdd\u6301\u5bc6\u5207\u806f\u7e6b\uff1f "),h.Pb(),h.Qb(33,"li"),h.sc(34," \u60a8\u662f\u5426\u60a3\u65b0\u51a0\u75c5\u6bd2COVID-19\uff1f "),h.Pb(),h.Qb(35,"li"),h.sc(36," \u60a8\u76ee\u524d\u6216\u6700\u8fd1\u662f\u5426\u6709\u54b3\u55fd\uff0c\u767c\u71d2\uff0c\u5589\u56a8\u75db\uff0c\u75b2\u52de\u6216\u547c\u5438\u6025\u4fc3\uff1f "),h.Pb(),h.Pb(),h.Qb(37,"ion-row"),h.Qb(38,"ion-col"),h.sc(39," If yes to any of these above please do not attend church service this week (13 HEALTH (13 43 25 84)). "),h.Pb(),h.Pb(),h.Qb(40,"ion-row"),h.Qb(41,"ion-col"),h.Qb(42,"mat-checkbox",10),h.sc(43," By checking this box I declare that i do not have any of these risk factors. "),h.Pb(),h.Pb(),h.Pb(),h.Qb(44,"ion-row"),h.Qb(45,"ion-col",11),h.Qb(46,"ion-item",12),h.Qb(47,"ion-label",13),h.sc(48," First name "),h.Pb(),h.Lb(49,"ion-input",14),h.Pb(),h.Pb(),h.Pb(),h.Qb(50,"ion-row"),h.Qb(51,"ion-col",11),h.Qb(52,"ion-item",12),h.Qb(53,"ion-label",13),h.sc(54," Last name "),h.Pb(),h.Lb(55,"ion-input",15),h.Pb(),h.Pb(),h.Pb(),h.Qb(56,"ion-row"),h.Qb(57,"ion-col",11),h.Qb(58,"ion-item",12),h.Qb(59,"ion-label",13),h.sc(60," Phone number "),h.Pb(),h.Lb(61,"ion-input",16),h.Pb(),h.Pb(),h.Pb(),h.Qb(62,"ion-row"),h.Qb(63,"ion-col",17),h.Qb(64,"ion-item",12),h.Qb(65,"ion-label",13),h.sc(66," Email address "),h.Pb(),h.Lb(67,"ion-input",18),h.Pb(),h.Pb(),h.Pb(),h.Qb(68,"ion-row"),h.Qb(69,"ion-col"),h.qc(70,m,7,2,"div",8),h.Pb(),h.Pb(),h.Qb(71,"ion-row"),h.Qb(72,"ion-col"),h.Mb(73,null,19),h.qc(75,p,3,1,"div",20),h.qc(76,f,2,0,"ng-template",null,21,h.rc),h.Pb(),h.Pb(),h.Qb(78,"ion-row"),h.Qb(79,"ion-col"),h.qc(80,P,3,1,"div",20),h.Pb(),h.Pb(),h.qc(81,C,2,0,"ng-template",null,22,h.rc),h.Pb(),h.Pb(),h.Pb()),2&e){const e=h.kc(77),o=h.kc(82);h.hc("translucent",!0),h.Ab(7),h.hc("formGroup",n.bookingForm),h.Ab(2),h.hc("fixed",!0),h.Ab(3),h.hc("ngIf",h.ec(13,13,n.latestPersonsCountEnglish)),h.Ab(2),h.uc(" Current English hall registration count: ",h.ec(15,15,n.latestPersonsCountEnglish)," out of maximum ",n.latestPersonsEnglishCap," "),h.Ab(3),h.uc(" Current Chinese hall registration count: ",h.ec(18,17,n.latestPersonsCountChinese)," out of maximum ",n.latestPersonsChineseCap," "),h.Ab(53),h.hc("ngIf",n.isRegistrationAllowedEnglishCountBelowCap&&n.isRegistrationAllowedChineseCountBelowCap),h.Ab(5),h.hc("ngIf",n.isRegistrationAllowedEnglishCountBelowCap)("ngIfElse",e),h.Ab(5),h.hc("ngIf",n.isRegistrationAllowedChineseCountBelowCap)("ngIfElse",o)}},directives:[c.h,c.t,c.c,d.a,c.s,c.e,r.o,r.k,r.e,c.g,c.n,c.d,s.j,i.a,r.j,r.d,c.k,c.l,c.j,c.x,r.m,c.b,c.i,c.r],pipes:[s.b],styles:[""]}),e})()}];let Q=(()=>{class e{}return e.\u0275mod=h.Ib({type:e}),e.\u0275inj=h.Hb({factory:function(n){return new(n||e)},imports:[[b.i.forChild(k)],b.i]}),e})(),v=(()=>{class e{}return e.\u0275mod=h.Ib({type:e}),e.\u0275inj=h.Hb({factory:function(n){return new(n||e)},imports:[[s.c,r.f,r.l,c.u,t.a,i.b,Q]]}),e})()}}]);