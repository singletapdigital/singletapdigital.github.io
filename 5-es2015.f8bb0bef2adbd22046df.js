(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{eNtl:function(n,o,e){"use strict";e.r(o),e.d(o,"BookingPageModule",(function(){return g}));var i=e("UKGz"),t=e("SVse"),r=e("s7LF"),s=e("sZkV"),b=e("iInd"),c=e("mrSG");class a{constructor(){this.personFirstName=new r.c("",[r.n.required,r.n.minLength(3)]),this.personLastName=new r.c("",[r.n.required,r.n.minLength(1)]),this.personPhoneNumber=new r.c("",[r.n.required,r.n.minLength(10),r.n.pattern(/^[+)(\d)]+$/)]),this.personEmailAddress=new r.c("",[r.n.required,r.n.minLength(1),r.n.email])}}var l=e("t0hA"),u=e("8Y7J"),d=e("h80k");const m=[{path:"",component:(()=>{class n{constructor(n,o,e){this.bookingService=n,this.formBuilder=o,this.toastController=e,this.bookingChineseUUID="445538f0-e22e-4568-acf8-9bc5bba3ceb6",this.bookingEnglishUUID="81508052-8691-4ff4-a3ef-c36bf7fccc88",this.eventChineseUUID="445538f0-e22e-4568-acf8-9bc5bba3ceb6",this.eventEnglishUUID="f883134b-661a-4388-b677-582bc2ea39aa",this.isLocked=!1;const i=o.group(class{static createPersonForm(){return new a}}.createPersonForm());this.bookingForm=i}ngOnInit(){console.log("BookingPage -> ngOnInit");const n=Object(l.b)(this.bookingService.getNumberOfPersonBookingsForEvent());this.latestPersonsCountChinese=n}clickSubmitForm(n="445538f0-e22e-4568-acf8-9bc5bba3ceb6",o,e,i=this.bookingForm,t=this.bookingService){console.log("BookingPage:: clickSubmitForm() -> form",o,e,i);const r=i.value;""!==r.personFirstName?t.addPersonToBookingByUUID(n,r).subscribe(n=>{var o,e,i,t;console.log("BookingPage -> clickSubmitForm -> personBookingResult",n),this.presentToast("Successfully saved booking "+(null===(t=null===(i=null===(e=null===(o=null==n?void 0:n.data)||void 0===o?void 0:o.insert_Person)||void 0===e?void 0:e.returning)||void 0===i?void 0:i[0])||void 0===t?void 0:t.personFirstName)).catch()},n=>{this.presentToast("Error saving "+JSON.stringify(n)).catch()}):this.presentToast("Invalid inputs detected").catch()}presentToast(n="Loading...",o=this.toastController){return Object(c.a)(this,void 0,void 0,(function*(){return(yield o.create({message:n,duration:3500,animated:!0,translucent:!0})).present().then(()=>{console.log("Toast presented")})}))}}return n.\u0275fac=function(o){return new(o||n)(u.Kb(l.a),u.Kb(r.b),u.Kb(s.y))},n.\u0275cmp=u.Eb({type:n,selectors:[["app-booking"]],decls:49,vars:13,consts:[[3,"translucent"],["color","cobaltblue"],["slot","start"],[2,"padding-inline-start","0.25em"],[3,"formGroup","ngSubmit"],["f","ngForm"],[3,"fixed"],["size","2"],["lines","full"],["position","floating"],["formControlName","personFirstName","type","text","required",""],["formControlName","personLastName","type","text","required",""],["formControlName","personPhoneNumber","type","text","required",""],["size","4.5"],["formControlName","personEmailAddress","type","text","required",""],["type","submit","color","cobaltblue",3,"disabled"],["name","person-add-outline"],["type","submit","mat-button","","color","primary","hidden","",3,"disabled"],["name","document-text"],["type","button","color","brightnavyblue",3,"disabled","click"]],template:function(n,o){if(1&n){const n=u.Rb();u.Qb(0,"ion-header",0),u.Qb(1,"ion-toolbar",1),u.Qb(2,"ion-buttons",2),u.Lb(3,"app-home-button"),u.Pb(),u.Qb(4,"ion-title",3),u.rc(5," Booking "),u.Pb(),u.Pb(),u.Pb(),u.Qb(6,"ion-content"),u.Qb(7,"form",4,5),u.Yb("ngSubmit",(function(e){u.lc(n);const i=u.kc(8);return o.clickSubmitForm(void 0,i,e)})),u.rc(9),u.dc(10,"async"),u.Lb(11,"br"),u.rc(12),u.dc(13,"async"),u.Qb(14,"ion-grid",6),u.Qb(15,"ion-row"),u.Qb(16,"ion-col",7),u.Qb(17,"ion-item",8),u.Qb(18,"ion-label",9),u.rc(19," First name "),u.Pb(),u.Lb(20,"ion-input",10),u.Pb(),u.Pb(),u.Pb(),u.Qb(21,"ion-row"),u.Qb(22,"ion-col",7),u.Qb(23,"ion-item",8),u.Qb(24,"ion-label",9),u.rc(25," Last name "),u.Pb(),u.Lb(26,"ion-input",11),u.Pb(),u.Pb(),u.Pb(),u.Qb(27,"ion-row"),u.Qb(28,"ion-col",7),u.Qb(29,"ion-item",8),u.Qb(30,"ion-label",9),u.rc(31," Phone number "),u.Pb(),u.Lb(32,"ion-input",12),u.Pb(),u.Pb(),u.Pb(),u.Qb(33,"ion-row"),u.Qb(34,"ion-col",13),u.Qb(35,"ion-item",8),u.Qb(36,"ion-label",9),u.rc(37," Email address "),u.Pb(),u.Lb(38,"ion-input",14),u.Pb(),u.Pb(),u.Pb(),u.Qb(39,"ion-button",15),u.Lb(40,"ion-icon",16),u.rc(41," Add Person to Booking "),u.Pb(),u.Qb(42,"button",17),u.Lb(43,"ion-icon",18),u.rc(44," Add Person (enter) "),u.Pb(),u.Qb(45,"ion-button",19),u.Yb("click",(function(e){u.lc(n);const i=u.kc(8);return o.clickSubmitForm(o.bookingEnglishUUID,i,e)})),u.rc(46," Register for Sunday service (English hall) "),u.Pb(),u.Qb(47,"ion-button",19),u.Yb("click",(function(e){u.lc(n);const i=u.kc(8);return o.clickSubmitForm(o.bookingChineseUUID,i,e)})),u.rc(48," Register for Sunday service (Chinese hall) "),u.Pb(),u.Pb(),u.Pb(),u.Pb()}2&n&&(u.hc("translucent",!0),u.Ab(7),u.hc("formGroup",o.bookingForm),u.Ab(2),u.sc(" Current English hall registration count: ",u.ec(10,9,o.latestPersonsCountEnglish)," "),u.Ab(3),u.sc(" Current Chinese hall registration count: ",u.ec(13,11,o.latestPersonsCountChinese)," "),u.Ab(2),u.hc("fixed",!0),u.Ab(25),u.hc("disabled",o.bookingForm.invalid),u.Ab(3),u.hc("disabled",o.bookingForm.invalid),u.Ab(3),u.hc("disabled",o.bookingForm.invalid),u.Ab(2),u.hc("disabled",o.bookingForm.invalid))},directives:[s.h,s.t,s.c,d.a,s.s,s.e,r.o,r.k,r.e,s.g,s.n,s.d,s.k,s.l,s.j,s.x,r.j,r.d,r.m,s.b,s.i],pipes:[t.b],styles:[""]}),n})()}];let h=(()=>{class n{}return n.\u0275mod=u.Ib({type:n}),n.\u0275inj=u.Hb({factory:function(o){return new(o||n)},imports:[[b.i.forChild(m)],b.i]}),n})(),g=(()=>{class n{}return n.\u0275mod=u.Ib({type:n}),n.\u0275inj=u.Hb({factory:function(o){return new(o||n)},imports:[[t.c,r.f,r.l,s.u,i.a,h]]}),n})()}}]);